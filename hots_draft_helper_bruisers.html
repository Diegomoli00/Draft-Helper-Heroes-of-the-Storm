<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Draft Helper - Heroes of the Storm</title>
    <!-- Caricamento di Tailwind CSS per uno stile moderno e responsive -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1117; /* Sfondo scuro per un look da gioco */
            color: #e5e7eb;
        }
        .card {
            background-color: #161b22;
            border: 1px solid #30363d;
        }
        .suggested-hero {
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            position: relative; /* Necessario per l'overlay dei dettagli */
        }

    </style>
</head>
<body class="p-4 md:p-8 min-h-screen">

    <header class="text-center mb-10">
        <h1 class="text-4xl font-bold text-red-500 mb-2">Heroes of the Storm Draft Helper</h1>
        <p class="text-xl text-gray-400">Enter draft details to get the best hero recommendation.</p>
    </header>

    <div id="app" class="max-w-4xl mx-auto">
        
        <!-- Controlli di Input -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-10">
            
            <!-- Selezione Mappa -->
            <div class="card p-5 rounded-lg shadow-lg">
                <label for="mapSelect" class="block text-lg font-semibold mb-3 text-red-400">1. Current Map</label>
                <select id="mapSelect" class="w-full bg-gray-700 text-white border border-gray-600 rounded-lg p-3 focus:ring-red-500 focus:border-red-500 transition duration-150">
                    <!-- Options populated by JS -->
                </select>
            </div>
            
            <!-- Eroi Alleati -->
            <div class="card p-5 rounded-lg shadow-lg">
                <label for="alliedHeroes" class="block text-lg font-semibold mb-3 text-green-400">2. Allied Heroes </label>
                <input type="text" 
                        id="alliedSearch" 
                        placeholder="Search allied hero..."
                        oninput="filterHeroes('alliedHeroesContainer', this.value)"
                        class="w-full mb-3 bg-gray-700 text-white border border-gray-600 rounded-lg p-2 focus:ring-green-500 focus:border-green-500">
                <div id="alliedHeroesContainer" class="space-y-2 max-h-40 overflow-y-auto pr-2 bg-gray-800 p-2 rounded-lg border border-gray-700">
                    <!-- Checkboxes populated by JS -->
                </div>
            </div>
            
            <!-- Eroi Avversari -->
            <div class="card p-5 rounded-lg shadow-lg">
                <label for="enemyHeroes" class="block text-lg font-semibold mb-3 text-purple-400">3. Enemy Heroes</label>
                <input type="text" 
                        id="enemySearch" 
                        placeholder="Search banned hero..."
                        oninput="filterHeroes('enemyHeroesContainer', this.value)"
                        class="w-full mb-3 bg-gray-700 text-white border border-gray-600 rounded-lg p-2 focus:ring-purple-500 focus:border-purple-500">
                <div id="enemyHeroesContainer" class="space-y-2 max-h-40 overflow-y-auto pr-2 bg-gray-800 p-2 rounded-lg border border-gray-700">
                    <!-- Checkboxes populated by JS -->
                </div>
            </div>

            <!-- Eroi Bannati -->
            <div class="card p-5 rounded-lg shadow-lg">
                <label for="bannedHeroes" class="block text-lg font-semibold mb-3 text-purple-400">4. Banned Heroes</label>
                <input type="text" 
                        id="enemySearch" 
                        placeholder="Search banned hero..."
                        oninput="filterHeroes('bannedHeroesContainer', this.value)"
                        class="w-full mb-3 bg-gray-700 text-white border border-gray-600 rounded-lg p-2 focus:ring-purple-500 focus:border-purple-500">
                <div id="bannedHeroesContainer" class="space-y-2 max-h-40 overflow-y-auto pr-2 bg-gray-800 p-2 rounded-lg border border-gray-700">
                    <!-- Checkboxes populated by JS -->
                </div>
            </div>

            <!-- Ruolo da pickare checkbox -->
            <div class="card p-5 rounded-lg shadow-lg">
                <label for="roleToPick" class="block text-lg font-semibold mb-3 text-purple-400">5. Role to Pick</label>
                <select id="roleToPick" class="w-full bg-gray-700 text-white border border-gray-600 rounded-lg p-3 focus:ring-red-500 focus:border-red-500 transition duration-150">
                    <!-- Checkboxes populated by JS -->
                </select>
            </div>
            
        </div>
        
        <!-- Bottone di Calcolo -->
        <div class="text-center mb-10">
            <button onclick="calculateSuggestions()" 
                    class="bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-8 rounded-lg shadow-xl transition duration-300 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-red-500 focus:ring-opacity-50">
                Find the Best Hero
            </button>
        </div>
        
        <!-- Risultati della Raccomandazione -->
        <div class="card p-6 rounded-lg shadow-xl" id="resultsContainer">
            <h2 class="text-2xl font-semibold mb-4 text-center">Hero Recommendations</h2>
            <div id="suggestionsList" class="space-y-4">
                <p class="text-center text-gray-400">Select the map and heroes to begin.</p>
            </div>
        </div>

    </div>

    <script>
        // Mappe complete
        const MAPS = [
            'Battlefield of Eternity',
            'Infernal Shrines',
            'Towers of Doom',
            'Cursed Hollow',
            'Volskaya Foundry',
            'Braxis Holdout',
            'Alterac Pass',
            'Dragon Shire',
            'Garden of Terror',
            'Sky Temple',
            'Tomb of the Spider Queen',
        ];

        // Mappa predefinita dei punteggi per gli eroi appena aggiunti
        const DEFAULT_MAP_SCORES = MAPS.reduce((acc, map) => {
            acc[map] = 3; // Punteggio neutro
            return acc;
        }, {});

        // --- DATASET ESTESO E AGGIORNATO CON TUTTI GLI EROI RICHIESTI ---
        const HEROES_DATA = [
            // ================================== TANK ==================================
            { id: 'anubarak', name: 'Anub\'arak', role: 'Tank', mapScore: { 'Battlefield of Eternity': 2, 'Infernal Shrines': 3, 'Towers of Doom': 4, 'Cursed Hollow': 4, 'Volskaya Foundry': 3, 'Braxis Holdout': 1, 'Alterac Pass': 5, 'Dragon Shire': 4, 'Garden of Terror': 4, 'Sky Temple': 3, 'Tomb of the Spider Queen': 2 }, synergy: ['jaina', 'kaelthas','butcher','rehgar','greymane'], countered: ['malthael', 'tracer', 'valla', 'zuljin', 'varian-s', 'leoric'] },
            { id: 'arthas', name: 'Arthas', role: 'Tank', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 4, 'Towers of Doom': 3, 'Cursed Hollow': 4, 'Volskaya Foundry': 3, 'Braxis Holdout': 1, 'Alterac Pass': 4, 'Dragon Shire': 2, 'Garden of Terror': 2, 'Sky Temple': 4, 'Tomb of the Spider Queen': 3 }, synergy: ['greymane', 'raynor', 'chromie', 'stukov', 'rehgar', 'maiev', 'tyrael', 'zarya', 'maiev'], countered: ['garrosh', 'jaina', 'deckard', 'ana', 'hanzo', 'kelthuzad'] },
            { id: 'blaze', name: 'Blaze', role: 'Tank', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 5, 'Towers of Doom': 4, 'Cursed Hollow': 3, 'Volskaya Foundry': 4, 'Braxis Holdout': 1, 'Alterac Pass': 3, 'Dragon Shire': 2, 'Garden of Terror': 3, 'Sky Temple': 4, 'Tomb of the Spider Queen': 4 }, synergy: ['arthas', 'kerrigan', 'maiev', 'malfurion'], countered: ['leoric', 'lunara', 'malthael', 'tracer', 'nova', 'valla'] },
            { id: 'cho', name: 'Cho', role: 'Tank', mapScore: { 'Battlefield of Eternity': 1, 'Infernal Shrines': 5, 'Towers of Doom': 3, 'Cursed Hollow': 3, 'Volskaya Foundry': 4, 'Braxis Holdout': 2, 'Alterac Pass': 3, 'Dragon Shire': 3, 'Garden of Terror': 5, 'Sky Temple': 3, 'Tomb of the Spider Queen': 4 }, synergy: ['gall', 'alexstrasza', 'brightwing', 'ana', 'auriel', 'yrel', 'blaze', 'blaze-b', 'johanna'], countered: ['malthael', 'leoric', 'brightwing', 'anubarak', 'maiev', 'kharazim-dps', 'kharazim', 'greymane', 'garrosh', 'raynor', 'imperius'] },
            { id: 'diablo', name: 'Diablo', role: 'Tank', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 4, 'Towers of Doom': 3, 'Cursed Hollow': 4, 'Volskaya Foundry': 3, 'Braxis Holdout': 1, 'Alterac Pass': 3, 'Dragon Shire': 4, 'Garden of Terror': 5, 'Sky Temple': 3, 'Tomb of the Spider Queen': 5 }, synergy: ['thrall', 'auriel', 'tassadar', 'tyrande', 'greymane', 'brightwing'], countered: ['malthael', 'leoric', 'johanna', 'garrosh', 'tychus', 'raynor'] },
            { id: 'etc', name: 'E.T.C.', role: 'Tank', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 4, 'Towers of Doom': 3, 'Cursed Hollow': 3, 'Volskaya Foundry': 2, 'Braxis Holdout': 2, 'Alterac Pass': 3, 'Dragon Shire': 2, 'Garden of Terror': 3, 'Sky Temple': 4, 'Tomb of the Spider Queen': 2 }, synergy: ['jaina', 'kaelthas', 'blaze-b', 'uther', 'alarak', 'greymane', 'tyrande', 'sghammer', 'orphea'], countered: ['uther', 'johanna', 'kaelthas', 'raynor', 'deathwing'] },
            { id: 'garrosh', name: 'Garrosh', role: 'Tank', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 3, 'Towers of Doom': 2, 'Cursed Hollow': 3, 'Volskaya Foundry': 4, 'Braxis Holdout': 5, 'Alterac Pass': 4, 'Dragon Shire': 5, 'Garden of Terror': 2, 'Sky Temple': 3, 'Tomb of the Spider Queen': 3 }, synergy: ['jaina', 'hanzo', 'malfurion', 'zarya', 'deckard', 'lucio'], countered: ['johanna', 'malthael', 'sylvanas', 'anduin', 'jaina', 'hanzo', 'lunara', 'leoric', 'medivh'] },
            { id: 'johanna', name: 'Johanna', role: 'Tank', mapScore: { 'Battlefield of Eternity': 2, 'Infernal Shrines': 5, 'Towers of Doom': 4, 'Cursed Hollow': 3, 'Volskaya Foundry': 4, 'Braxis Holdout': 1, 'Alterac Pass': 5, 'Dragon Shire': 2, 'Garden of Terror': 3, 'Sky Temple': 4, 'Tomb of the Spider Queen': 5 }, synergy: ['azmodan', 'blaze-b', 'maiev', 'jaina', 'deckard', 'leoric', 'hanzo', 'sonya', 'cassia'], countered: ['varian-s', 'varian-t', 'zeratul', 'hanzo', 'leoric'] },
            { id: 'malganis', name: 'Mal\'Ganis', role: 'Tank', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 4, 'Towers of Doom': 3, 'Cursed Hollow': 3, 'Volskaya Foundry': 3, 'Braxis Holdout': 5, 'Alterac Pass': 4, 'Dragon Shire': 3, 'Garden of Terror': 3, 'Sky Temple': 3, 'Tomb of the Spider Queen': 2 }, synergy: ['kelthuzad', 'deckard', 'malfurion', 'jaina', 'illidan', 'zeratul', 'orphea'], countered: ['garrosh', 'raynor', 'malfurion', 'zeratul', 'hanzo', 'deckard'] },
            { id: 'mei', name: 'Mei', role: 'Tank', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 4, 'Towers of Doom': 2, 'Cursed Hollow': 4, 'Volskaya Foundry': 3, 'Braxis Holdout': 5, 'Alterac Pass': 3, 'Dragon Shire': 2, 'Garden of Terror': 2, 'Sky Temple': 4, 'Tomb of the Spider Queen': 4 }, synergy: ['jaina', 'tassadar', 'xul', 'deckard', 'lunara', 'maiev', 'orphea', 'greymane', 'raynor'], countered: ['malfurion', 'etc', 'tracer', 'hanzo', 'ana', 'li-ming', 'junkrat', 'yrel', 'zeratul'] },
            { id: 'muradin', name: 'Muradin', role: 'Tank', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 1, 'Towers of Doom': 3, 'Cursed Hollow': 3, 'Volskaya Foundry': 3, 'Braxis Holdout': 2, 'Alterac Pass': 3, 'Dragon Shire': 4, 'Garden of Terror': 3, 'Sky Temple': 4, 'Tomb of the Spider Queen': 1 }, synergy: ['li-ming', 'blaze-b', 'kerrigan', 'malfurion', 'orphea', 'hanzo'], countered: ['zarya', 'tychus', 'etc', 'raynor', 'thrall',] },
            { id: 'stitches', name: 'Stitches', role: 'Tank', mapScore: { 'Battlefield of Eternity': 1, 'Infernal Shrines': 3, 'Towers of Doom': 5, 'Cursed Hollow': 4, 'Volskaya Foundry': 4, 'Braxis Holdout': 3, 'Alterac Pass': 5, 'Dragon Shire': 3, 'Garden of Terror': 4, 'Sky Temple': 2, 'Tomb of the Spider Queen': 4 }, synergy: ['jaina', 'chromie', 'kaelthas', 'malfurion', 'falstad', 'tyrande'], countered: ['tracer', 'genji', 'muradin', 'johanna', 'malthael', 'tychus', 'anduin'] },
            { id: 'tyrael', name: 'Tyrael', role: 'Tank', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 4, 'Towers of Doom': 3, 'Cursed Hollow': 5, 'Volskaya Foundry': 2, 'Braxis Holdout': 3, 'Alterac Pass': 5, 'Dragon Shire': 4, 'Garden of Terror': 3, 'Sky Temple': 5, 'Tomb of the Spider Queen': 4 }, synergy: ['illidan', 'greymane', 'kerrigan', 'morales', 'blaze-b', 'blaze', 'sghammer', 'valla'], countered: ['medivh', 'falstad', 'garrosh', 'mei', 'zeratul', 'brightwing'] },
            { id: 'varian-t', name: 'Varian', role: 'Tank', mapScore: { 'Battlefield of Eternity': 1, 'Infernal Shrines': 2, 'Towers of Doom': 4, 'Cursed Hollow': 3, 'Volskaya Foundry': 4, 'Braxis Holdout': 4, 'Alterac Pass': 3, 'Dragon Shire': 4, 'Garden of Terror': 4, 'Sky Temple': 1, 'Tomb of the Spider Queen': 3 }, synergy: ['imperius', 'anduin', 'tyrande', 'malfurion', 'blaze-b', 'li-ming', 'jaina'], countered: ['hanzo', 'etc', 'garrosh', 'lunara', 'rehgar', 'uther', 'medivh'] },

            // ================================== BRUISER ==================================
            { id: 'artanis', name: 'Artanis', role: 'Bruiser', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 2, 'Towers of Doom': 1, 'Cursed Hollow': 3, 'Volskaya Foundry': 3, 'Braxis Holdout': 5, 'Alterac Pass': 4, 'Dragon Shire': 3, 'Garden of Terror': 3, 'Sky Temple': 3, 'Tomb of the Spider Queen': 2 }, synergy: ['malfurion', 'garrosh', 'kaelthas', 'zarya', 'lunara', 'arthas', 'lucio', 'cassia'], countered: ['arthas', 'johanna', 'etc', 'lili', 'varian-t', 'jaina'] },
            { id: 'blaze-b', name: 'Blaze', role: 'Bruiser', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 5, 'Towers of Doom': 4, 'Cursed Hollow': 3, 'Volskaya Foundry': 4, 'Braxis Holdout': 1, 'Alterac Pass': 3, 'Dragon Shire': 2, 'Garden of Terror': 3, 'Sky Temple': 4, 'Tomb of the Spider Queen': 4 }, synergy: ['arthas', 'kerrigan', 'maiev', 'malfurion'], countered: ['leoric', 'lunara', 'malthael', 'tracer', 'nova', 'valla'] },
            { id: 'chen', name: 'Chen', role: 'Bruiser', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 4, 'Towers of Doom': 1, 'Cursed Hollow': 2, 'Volskaya Foundry': 3, 'Braxis Holdout': 4, 'Alterac Pass': 4, 'Dragon Shire': 3, 'Garden of Terror': 2, 'Sky Temple': 5, 'Tomb of the Spider Queen': 3 }, synergy: ['tyrael', 'rehgar', 'greymane', 'li-ming', 'abathur', 'johanna'], countered: ['etc', 'lucio', 'raynor', 'yrel', 'tlv', 'li-ming', 'abathur'] },
            { id: 'deathwing', name: 'Deathwing', role: 'Bruiser', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 3, 'Towers of Doom': 4, 'Cursed Hollow': 5, 'Volskaya Foundry': 3, 'Braxis Holdout': 3, 'Alterac Pass': 4, 'Dragon Shire': 1, 'Garden of Terror': 5, 'Sky Temple': 1, 'Tomb of the Spider Queen': 3 }, synergy: ['johanna', 'etc', 'arthas', 'muradin', 'malfurion'], countered: ['tychus', 'greymane', 'zeratul', 'valla', 'tracer', 'leoric'] },
            { id: 'dehaka', name: 'Dehaka', role: 'Bruiser', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 4, 'Towers of Doom': 5, 'Cursed Hollow': 5, 'Volskaya Foundry': 1, 'Braxis Holdout': 4, 'Alterac Pass': 3, 'Dragon Shire': 5, 'Garden of Terror': 4, 'Sky Temple': 5, 'Tomb of the Spider Queen': 3 }, synergy: ['junkrat', 'anubarak', 'maiev', 'jaina', 'orphea', 'hanzo'], countered: ['lucio', 'valla', 'sghammer', 'etc', 'raynor'] },
            { id: 'dva', name: 'D.Va', role: 'Bruiser', mapScore: { 'Battlefield of Eternity': 2, 'Infernal Shrines': 5, 'Towers of Doom': 4, 'Cursed Hollow': 2, 'Volskaya Foundry': 4, 'Braxis Holdout': 1, 'Alterac Pass': 3, 'Dragon Shire': 3, 'Garden of Terror': 3, 'Sky Temple': 3, 'Tomb of the Spider Queen': 5 }, synergy: ['garrosh', 'falstad', 'maiev', 'deckard', 'anduin'], countered: ['butcher', 'artanis', 'etc', 'raynor', 'malthael', 'stukov'] },
            { id: 'gazlowe', name: 'Gazlowe', role: 'Bruiser', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 5, 'Towers of Doom': 1, 'Cursed Hollow': 3, 'Volskaya Foundry': 4, 'Braxis Holdout': 4, 'Alterac Pass': 4, 'Dragon Shire': 3, 'Garden of Terror': 3, 'Sky Temple': 5, 'Tomb of the Spider Queen': 3 }, synergy: ['jaina', 'etc', 'diablo', 'johanna', 'malfurion', 'kaelthas', 'maiev', 'anduin'], countered: ['tracer', 'raynor', 'guldan', 'li-ming', 'hanzo', 'chromie', 'lunara'] },
            { id: 'hogger', name: 'Hogger', role: 'Bruiser', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 5, 'Towers of Doom': 4, 'Cursed Hollow': 5, 'Volskaya Foundry': 3, 'Braxis Holdout': 3, 'Alterac Pass': 4, 'Dragon Shire': 4, 'Garden of Terror': 4, 'Sky Temple': 5, 'Tomb of the Spider Queen': 4 }, synergy: ['diablo', 'hanzo', 'sonya', 'stukov', 'auriel', 'orphea'], countered: ['diablo', 'uther', 'lunara', 'tychus', 'malthael', 'zeratul'] },
            { id: 'imperius', name: 'Imperius', role: 'Bruiser', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 3, 'Towers of Doom': 1, 'Cursed Hollow': 3, 'Volskaya Foundry': 4, 'Braxis Holdout': 5, 'Alterac Pass': 4, 'Dragon Shire': 3, 'Garden of Terror': 2, 'Sky Temple': 2, 'Tomb of the Spider Queen': 3 }, synergy: ['varian-t', 'jaina', 'fenix', 'rehgar', 'etc', 'blaze', 'malganis', 'yrel'], countered: ['jaina', 'raynor', 'sghammer', 'etc', 'lucio', 'zuljin'] },
            { id: 'leoric', name: 'Leoric', role: 'Bruiser', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 5, 'Towers of Doom': 4, 'Cursed Hollow': 5, 'Volskaya Foundry': 4, 'Braxis Holdout': 2, 'Alterac Pass': 3, 'Dragon Shire': 3, 'Garden of Terror': 5, 'Sky Temple': 2, 'Tomb of the Spider Queen': 4 }, synergy: ['diablo', 'orphea', 'stukov'], countered: ['tracer', 'dehaka', 'ana', 'samuro', 'falstad'] },
            { id: 'malthael', name: 'Malthael', role: 'Bruiser', mapScore: { 'Battlefield of Eternity': 1, 'Infernal Shrines': 5, 'Towers of Doom': 5, 'Cursed Hollow': 3, 'Volskaya Foundry': 3, 'Braxis Holdout': 3, 'Alterac Pass': 3, 'Dragon Shire': 4, 'Garden of Terror': 4, 'Sky Temple': 4, 'Tomb of the Spider Queen': 4 }, synergy: ['etc', 'malfurion', 'ana', 'garrosh', 'greymane', 'tychus', 'uther'], countered: ['falstad', 'valla', 'tracer', 'fenix', 'lunara', 'medivh'] },
            { id: 'ragnaros', name: 'Ragnaros', role: 'Bruiser', mapScore: { 'Battlefield of Eternity': 1, 'Infernal Shrines': 5, 'Towers of Doom': 1, 'Cursed Hollow': 3, 'Volskaya Foundry': 4, 'Braxis Holdout': 2, 'Alterac Pass': 3, 'Dragon Shire': 3, 'Garden of Terror': 3, 'Sky Temple': 5, 'Tomb of the Spider Queen': 4 }, synergy: ['etc', 'kaelthas', 'ana', 'hanzo'], countered: ['garrosh', 'orphea', 'tracer', 'lunara', 'jaina', 'stukov', 'sonya', 'chen'] },
            { id: 'rexxar', name: 'Rexxar', role: 'Bruiser', mapScore: { 'Battlefield of Eternity': 2, 'Infernal Shrines': 2, 'Towers of Doom': 2, 'Cursed Hollow': 2, 'Volskaya Foundry': 2, 'Braxis Holdout': 5, 'Alterac Pass': 2, 'Dragon Shire': 5, 'Garden of Terror': 2, 'Sky Temple': 2, 'Tomb of the Spider Queen': 4 }, synergy: ['johanna', 'malfurion', 'jaina'], countered: ['genji', 'tracer', 'illidan', 'tyrael', 'qhira', 'kharazim', 'kharazim-dps', 'zeratul'] },
            { id: 'sonya', name: 'Sonya', role: 'Bruiser', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 5, 'Towers of Doom': 2, 'Cursed Hollow': 4, 'Volskaya Foundry': 3, 'Braxis Holdout': 3, 'Alterac Pass': 3, 'Dragon Shire': 3, 'Garden of Terror': 5, 'Sky Temple': 3, 'Tomb of the Spider Queen': 3 }, synergy: ['muradin', 'tracer', 'jaina', 'orphea', 'etc', 'johanna'], countered: ['etc', 'sylvanas', 'brightwing', 'tychus', 'leoric'] },
            { id: 'thrall', name: 'Thrall', role: 'Bruiser', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 3, 'Towers of Doom': 4, 'Cursed Hollow': 3, 'Volskaya Foundry': 4, 'Braxis Holdout': 5, 'Alterac Pass': 3, 'Dragon Shire': 4, 'Garden of Terror': 1, 'Sky Temple': 3, 'Tomb of the Spider Queen': 1 }, synergy: ['diablo', 'rehgar', 'fenix', 'chromie', 'jaina'], countered: ['johanna', 'arthas', 'kaelthas', 'lunara', 'lili', 'malfurion'] },
            { id: 'xul', name: 'Xul', role: 'Bruiser', mapScore: { 'Battlefield of Eternity': 1, 'Infernal Shrines': 5, 'Towers of Doom': 3, 'Cursed Hollow': 4, 'Volskaya Foundry': 3, 'Braxis Holdout': 1, 'Alterac Pass': 3, 'Dragon Shire': 3, 'Garden of Terror': 4, 'Sky Temple': 4, 'Tomb of the Spider Queen': 5 }, synergy: ['tyrande', 'malfurion', 'medivh', 'falstad', 'li-ming'], countered: ['etc', 'johanna', 'sghammer', 'jaina', 'auriel'] },
            { id: 'yrel', name: 'Yrel', role: 'Bruiser', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 5, 'Towers of Doom': 3, 'Cursed Hollow': 3, 'Volskaya Foundry': 4, 'Braxis Holdout': 5, 'Alterac Pass': 3, 'Dragon Shire': 5, 'Garden of Terror': 3, 'Sky Temple': 4, 'Tomb of the Spider Queen': 3 }, synergy: ['garrosh', 'johanna', 'maiev', 'abathur'], countered: ['etc', 'lucio', 'johanna', 'raynor'] },
            
            // ================================== ASSASSIN RANGED ==================================
            { id: 'azmodan', name: 'Azmodan', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 5, 'Towers of Doom': 4, 'Cursed Hollow': 3, 'Volskaya Foundry': 4, 'Braxis Holdout': 1, 'Alterac Pass': 3, 'Dragon Shire': 3, 'Garden of Terror': 3, 'Sky Temple': 3, 'Tomb of the Spider Queen': 5 }, synergy: ['johanna', 'maiev', 'malfurion'], countered: ['diablo', 'muradin', 'anubarak', 'butcher', 'malthael', 'artanis', 'sonya'] },
            { id: 'cassia', name: 'Cassia', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 4, 'Infernal Shrines': 4, 'Towers of Doom': 4, 'Cursed Hollow': 4, 'Volskaya Foundry': 4, 'Braxis Holdout': 4, 'Alterac Pass': 4, 'Dragon Shire': 4, 'Garden of Terror': 4, 'Sky Temple': 4, 'Tomb of the Spider Queen': 4 }, synergy: ['johanna', 'lili', 'artanis', 'jaina', 'thrall', 'mei'], countered: ['kaelthas', 'johanna', 'xul', 'malganis', 'imperius', 'etc'] },
            { id: 'chromie', name: 'Chromie', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 3, 'Towers of Doom': 3, 'Cursed Hollow': 3, 'Volskaya Foundry': 5, 'Braxis Holdout': 5, 'Alterac Pass': 3, 'Dragon Shire': 3, 'Garden of Terror': 3, 'Sky Temple': 3, 'Tomb of the Spider Queen': 3 }, synergy: ['malfurion', 'johanna', 'ana'], countered: ['tracer', 'genji', 'zeratul', 'illidan', 'diablo'] },
            { id: 'falstad', name: 'Falstad', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 3, 'Towers of Doom': 4, 'Cursed Hollow': 5, 'Volskaya Foundry': 3, 'Braxis Holdout': 5, 'Alterac Pass': 3, 'Dragon Shire': 5, 'Garden of Terror': 3, 'Sky Temple': 5, 'Tomb of the Spider Queen': 1 }, synergy: ['uther', 'etc', 'arthas', 'tassadar'], countered: ['nova', 'genji', 'zeratul', 'illidan', 'greymane', 'valeera'] },
            { id: 'fenix', name: 'Fenix', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 5, 'Towers of Doom': 3, 'Cursed Hollow': 3, 'Volskaya Foundry': 3, 'Braxis Holdout': 5, 'Alterac Pass': 3, 'Dragon Shire': 3, 'Garden of Terror': 3, 'Sky Temple': 3, 'Tomb of the Spider Queen': 5 }, synergy: ['johanna', 'maiev', 'thrall', 'diablo'], countered: ['varian-t', 'varian-s', 'etc', 'genji', 'zeratul', 'lucio'] },
            { id: 'gall', name: 'Gall', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 1, 'Infernal Shrines': 5, 'Towers of Doom': 3, 'Cursed Hollow': 3, 'Volskaya Foundry': 4, 'Braxis Holdout': 2, 'Alterac Pass': 3, 'Dragon Shire': 3, 'Garden of Terror': 5, 'Sky Temple': 3, 'Tomb of the Spider Queen': 4 }, synergy: ['cho', 'alexstrasza', 'brightwing', 'ana', 'auriel', 'yrel', 'blaze', 'blaze-b', 'johanna'], countered: ['malthael', 'leoric', 'brightwing', 'anubarak', 'maiev', 'kharazim', 'kharazim-dps', 'greymane', 'garrosh', 'raynor', 'imperius'] },
            { id: 'genji', name: 'Genji', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 2, 'Infernal Shrines': 4, 'Towers of Doom': 3, 'Cursed Hollow': 5, 'Volskaya Foundry': 3, 'Braxis Holdout': 5, 'Alterac Pass': 3, 'Dragon Shire': 3, 'Garden of Terror': 5, 'Sky Temple': 3, 'Tomb of the Spider Queen': 1 }, synergy: ['uther', 'etc', 'jaina', 'anduin'], countered: ['uther', 'varian-t', 'lunara', 'malfurion'] },
            { id: 'greymane', name: 'Greymane', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 3, 'Towers of Doom': 3, 'Cursed Hollow': 3, 'Volskaya Foundry': 4, 'Braxis Holdout': 3, 'Alterac Pass': 3, 'Dragon Shire': 5, 'Garden of Terror': 5, 'Sky Temple': 5, 'Tomb of the Spider Queen': 4 }, synergy: ['malthael', 'uther', 'etc', 'rehgar', 'tyrael', 'abathur', 'garrosh'], countered: ['arthas', 'johanna', 'uther', 'brightwing', 'butcher', 'muradin', 'xul'] },
            { id: 'guldan', name: 'Gul\'dan', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 5, 'Towers of Doom': 3, 'Cursed Hollow': 3, 'Volskaya Foundry': 4, 'Braxis Holdout': 5, 'Alterac Pass': 4, 'Dragon Shire': 5, 'Garden of Terror': 3, 'Sky Temple': 4, 'Tomb of the Spider Queen': 5 }, synergy: ['johanna', 'etc', 'malfurion', 'auriel'], countered: ['tracer', 'maiev', 'kerrigan'] },
            { id: 'hanzo', name: 'Hanzo', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 5, 'Towers of Doom': 5, 'Cursed Hollow': 4, 'Volskaya Foundry': 4, 'Braxis Holdout': 3, 'Alterac Pass': 4, 'Dragon Shire': 3, 'Garden of Terror': 3, 'Sky Temple': 4, 'Tomb of the Spider Queen': 4 }, synergy: ['etc', 'johanna', 'malganis', 'diablo', 'blaze', 'blaze-b', 'zeratul'], countered: ['genji', 'illidan', 'zeratul', 'tracer'] },
            { id: 'jaina', name: 'Jaina', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 5, 'Towers of Doom': 3, 'Cursed Hollow': 3, 'Volskaya Foundry': 3, 'Braxis Holdout': 4, 'Alterac Pass': 3, 'Dragon Shire': 5, 'Garden of Terror': 5, 'Sky Temple': 3, 'Tomb of the Spider Queen': 5 }, synergy: ['muradin', 'johanna', 'etc', 'xul', 'muradin', 'varian-t', 'maiev', 'malfurion'], countered: ['genji', 'tracer', 'anubarak', 'alarak', 'chen', 'valeera', 'nova', 'zeratul'] },
            { id: 'junkrat', name: 'Junkrat', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 5, 'Towers of Doom': 5, 'Cursed Hollow': 4, 'Volskaya Foundry': 4, 'Braxis Holdout': 4, 'Alterac Pass': 4, 'Dragon Shire': 5, 'Garden of Terror': 5, 'Sky Temple': 4, 'Tomb of the Spider Queen': 4 }, synergy: ['etc', 'garrosh', 'uther', 'malfurion', 'zeratul'], countered: ['tracer', 'genji', 'zeratul', 'illidan', 'tyrael'] },
            { id: 'kaelthas', name: 'Kael\'thas', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 5, 'Towers of Doom': 4, 'Cursed Hollow': 3, 'Volskaya Foundry': 4, 'Braxis Holdout': 5, 'Alterac Pass': 3, 'Dragon Shire': 4, 'Garden of Terror': 3, 'Sky Temple': 3, 'Tomb of the Spider Queen': 5 }, synergy: ['etc', 'johanna', 'arthas', 'uther', 'malfurion'], countered: ['kerrigan', 'illidan', 'zeratul', 'tracer'] },
            { id: 'kelthuzad', name: 'Kel\'Thuzad', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 4, 'Towers of Doom': 5, 'Cursed Hollow': 3, 'Volskaya Foundry': 4, 'Braxis Holdout': 5, 'Alterac Pass': 1, 'Dragon Shire': 3, 'Garden of Terror': 3, 'Sky Temple': 3, 'Tomb of the Spider Queen': 3 }, synergy: ['anduin', 'arthas', 'johanna', 'malfurion', 'butcher', 'valeera', 'varian-t', 'xul'], countered: ['tracer', 'genji', 'zeratul', 'nova', 'anubarak', 'chen', 'samuro', 'valeera'] },
            { id: 'li-ming', name: 'Li-Ming', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 5, 'Towers of Doom': 4, 'Cursed Hollow': 5, 'Volskaya Foundry': 3, 'Braxis Holdout': 3, 'Alterac Pass': 5, 'Dragon Shire': 3, 'Garden of Terror': 3, 'Sky Temple': 3, 'Tomb of the Spider Queen': 3 }, synergy: ['etc', 'arthas', 'johanna', 'varian-t', 'malfurion', 'valeera', 'xul'], countered: ['tracer', 'genji', 'zeratul', 'nova', 'anubarak', 'chen', 'samuro', 'valeera'] },
            { id: 'lunara', name: 'Lunara', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 3, 'Towers of Doom': 3, 'Cursed Hollow': 4, 'Volskaya Foundry': 3, 'Braxis Holdout': 3, 'Alterac Pass': 3, 'Dragon Shire': 4, 'Garden of Terror': 4, 'Sky Temple': 3, 'Tomb of the Spider Queen': 3 }, synergy: ['arthas', 'muradin', 'jaina'], countered: ['genji', 'stukov', 'illidan', 'malfurion', 'lucio'] },
            { id: 'mephisto', name: 'Mephisto', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 5, 'Towers of Doom': 4, 'Cursed Hollow': 3, 'Volskaya Foundry': 5, 'Braxis Holdout': 5, 'Alterac Pass': 5, 'Dragon Shire': 3, 'Garden of Terror': 3, 'Sky Temple': 3, 'Tomb of the Spider Queen': 3 }, synergy: ['etc', 'diablo', 'deckard', 'zarya', 'deckard'], countered: ['kaelthas', 'kelthuzad', 'junkrat', 'stitches', 'anubarak'] },
            { id: 'nazeebo', name: 'Nazeebo', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 1, 'Infernal Shrines': 3, 'Towers of Doom': 4, 'Cursed Hollow': 3, 'Volskaya Foundry': 5, 'Braxis Holdout': 1, 'Alterac Pass': 3, 'Dragon Shire': 5, 'Garden of Terror': 3, 'Sky Temple': 1, 'Tomb of the Spider Queen': 5 }, synergy: ['johanna', 'stukov', 'raynor', 'sylvanas', 'malganis', 'auriel'], countered: ['etc', 'sylvanas', 'zeratul'] },
            { id: 'nova', name: 'Nova', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 1, 'Towers of Doom': 2, 'Cursed Hollow': 3, 'Volskaya Foundry': 3, 'Braxis Holdout': 1, 'Alterac Pass': 3, 'Dragon Shire': 5, 'Garden of Terror': 2, 'Sky Temple': 1, 'Tomb of the Spider Queen': 2 }, synergy: ['blaze', 'blaze-b', 'johanna', 'sylvanas', 'stukov'], countered: ['anubarak', 'genji', 'zeratul', 'chen', 'zarya', 'brightwing'] },
            { id: 'orphea', name: 'Orphea', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 1, 'Infernal Shrines': 4, 'Towers of Doom': 3, 'Cursed Hollow': 4, 'Volskaya Foundry': 3, 'Braxis Holdout': 5, 'Alterac Pass': 3, 'Dragon Shire': 4, 'Garden of Terror': 4, 'Sky Temple': 5, 'Tomb of the Spider Queen': 5 }, synergy: ['blaze', 'blaze-b', 'johanna', 'maiev', 'xul', 'malganis', 'varian-t', 'etc'], countered: ['anubarak', 'genji', 'chen', 'johanna', 'lunara', 'muradin'] },
            { id: 'probius', name: 'Probius', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 1, 'Infernal Shrines': 4, 'Towers of Doom': 5, 'Cursed Hollow': 3, 'Volskaya Foundry': 4, 'Braxis Holdout': 5, 'Alterac Pass': 4, 'Dragon Shire': 3, 'Garden of Terror': 3, 'Sky Temple': 3, 'Tomb of the Spider Queen': 4 }, synergy: ['diablo', 'etc', 'anubarak', 'arthas', 'malfurion'], countered: ['tracer', 'kerrigan', 'zeratul', 'alarak'] },
            { id: 'raynor', name: 'Raynor', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 5, 'Towers of Doom': 4, 'Cursed Hollow': 3, 'Volskaya Foundry': 3, 'Braxis Holdout': 3, 'Alterac Pass': 3, 'Dragon Shire': 5, 'Garden of Terror': 3, 'Sky Temple': 3, 'Tomb of the Spider Queen': 4 }, synergy: ['etc', 'thrall', 'garrosh', 'morales'], countered: ['johanna', 'cassia', 'artanis', 'lili'] },
            { id: 'sghammer', name: 'Sgt. Hammer', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 5, 'Towers of Doom': 4, 'Cursed Hollow': 2, 'Volskaya Foundry': 3, 'Braxis Holdout': 5, 'Alterac Pass': 3, 'Dragon Shire': 3, 'Garden of Terror': 2, 'Sky Temple': 3, 'Tomb of the Spider Queen': 1 }, synergy: ['johanna', 'morales', 'ana', 'auriel', 'etc'], countered: ['artanis', 'stitches', 'li-ming', 'kethuzad', 'chromie'] },
            { id: 'sylvanas', name: 'Sylvanas', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 4, 'Towers of Doom': 3, 'Cursed Hollow': 3, 'Volskaya Foundry': 5, 'Braxis Holdout': 5, 'Alterac Pass': 5, 'Dragon Shire': 4, 'Garden of Terror': 3, 'Sky Temple': 3, 'Tomb of the Spider Queen': 5 }, synergy: ['diablo', 'etc', 'tyrande', 'valla', 'tassadar', 'jaina'], countered: ['nova', 'genji', 'valeera', 'zeratul', 'diablo', 'butcher', 'chen'] },
            { id: 'tassadar', name: 'Tassadar', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 2, 'Infernal Shrines': 5, 'Towers of Doom': 3, 'Cursed Hollow': 2, 'Volskaya Foundry': 5, 'Braxis Holdout': 5, 'Alterac Pass': 3, 'Dragon Shire': 3, 'Garden of Terror': 4, 'Sky Temple': 3, 'Tomb of the Spider Queen': 5 }, synergy: ['etc', 'maiev', 'johanna', 'genji', 'zeratul'], countered: ['tracer', 'anubarak', 'greymane', 'kerrigan', 'zeratul'] },
            { id: 'tracer', name: 'Tracer', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 1, 'Towers of Doom': 5, 'Cursed Hollow': 4, 'Volskaya Foundry': 4, 'Braxis Holdout': 3, 'Alterac Pass': 3, 'Dragon Shire': 5, 'Garden of Terror': 3, 'Sky Temple': 5, 'Tomb of the Spider Queen': 1 }, synergy: ['abathur', 'brightwing', 'malfurion', 'anduin', 'jaina', 'tassadar', 'guldan', 'kaelthas'], countered: ['varian-t', 'diablo', 'sghammer', 'raynor', 'medivh', 'brightwing'] },
            { id: 'tychus', name: 'Tychus', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 5, 'Towers of Doom': 4, 'Cursed Hollow': 4, 'Volskaya Foundry': 5, 'Braxis Holdout': 3, 'Alterac Pass': 3, 'Dragon Shire': 5, 'Garden of Terror': 3, 'Sky Temple': 1, 'Tomb of the Spider Queen': 3 }, synergy: ['uther', 'etc', 'garrosh', 'dehaka'], countered: ['anubarak', 'johanna', 'lucio', 'lili'] },
            { id: 'valla', name: 'Valla', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 5, 'Towers of Doom': 3, 'Cursed Hollow': 3, 'Volskaya Foundry': 5, 'Braxis Holdout': 3, 'Alterac Pass': 3, 'Dragon Shire': 4, 'Garden of Terror': 3, 'Sky Temple': 3, 'Tomb of the Spider Queen': 5 }, synergy: ['arthas', 'uther', 'auriel', 'garrosh'], countered: ['greymane', 'butcher', 'zeratul', 'valeera', 'nova', 'illidan'] },
            { id: 'zagara', name: 'Zagara', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 3, 'Towers of Doom': 4, 'Cursed Hollow': 5, 'Volskaya Foundry': 3, 'Braxis Holdout': 5, 'Alterac Pass': 4, 'Dragon Shire': 3, 'Garden of Terror': 5, 'Sky Temple': 4, 'Tomb of the Spider Queen': 1 }, synergy: ['etc', 'jaina', 'deckard'], countered: ['illidan', 'chen', 'falstad', 'zeratul', 'dehaka'] },
            { id: 'zuljin', name: 'Zul\'jin', role: 'Ranged Assassin', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 3, 'Towers of Doom': 3, 'Cursed Hollow': 3, 'Volskaya Foundry': 3, 'Braxis Holdout': 3, 'Alterac Pass': 3, 'Dragon Shire': 3, 'Garden of Terror': 3, 'Sky Temple': 3, 'Tomb of the Spider Queen': 3 }, synergy: ['tyrael', 'uther', 'etc', 'arthas', 'tassadar', 'medivh'], countered: ['etc', 'garrosh', 'lili', 'johanna', 'dehaka', 'uther', 'stukov'] },

            // ================================== ASSASSIN MELEE ==================================
            { id: 'alarak', name: 'Alarak', role: 'Melee Assassin', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 1, 'Towers of Doom': 4, 'Cursed Hollow': 3, 'Volskaya Foundry': 3, 'Braxis Holdout': 3, 'Alterac Pass': 3, 'Dragon Shire': 3, 'Garden of Terror': 3, 'Sky Temple': 1, 'Tomb of the Spider Queen': 3 }, synergy: ['raynor', 'etc', 'jaina', 'garrosh'], countered: ['etc', 'deathwing', 'johanna', 'medivh'] },
            { id: 'illidan', name: 'Illidan', role: 'Melee Assassin', mapScore: { 'Battlefield of Eternity': 1, 'Infernal Shrines': 3, 'Towers of Doom': 2, 'Cursed Hollow': 5, 'Volskaya Foundry': 2, 'Braxis Holdout': 1, 'Alterac Pass': 3, 'Dragon Shire': 3, 'Garden of Terror': 5, 'Sky Temple': 5, 'Tomb of the Spider Queen': 3 }, synergy: ['reghar', 'abathur', 'medivh', 'tyrael', 'uther', 'zarya'], countered: ['etc', 'sonya', 'arthas', 'brightwing', 'lili', 'johanna', 'varian-t', 'muradin', 'uther'] },
            { id: 'kerrigan', name: 'Kerrigan', role: 'Melee Assassin', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 5, 'Towers of Doom': 3, 'Cursed Hollow': 3, 'Volskaya Foundry': 4, 'Braxis Holdout': 5, 'Alterac Pass': 4, 'Dragon Shire': 4, 'Garden of Terror': 3, 'Sky Temple': 3, 'Tomb of the Spider Queen': 5 }, synergy: ['uther', 'tyrael', 'tyrande', 'medivh'], countered: ['tyrael', 'etc', 'garrosh', 'uther', 'medivh', 'auriel', 'lucio'] },
            { id: 'kharazim-dps', name: 'Kharazim', role: 'Melee Assassin', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 3, 'Towers of Doom': 4, 'Cursed Hollow': 3, 'Volskaya Foundry': 3, 'Braxis Holdout': 1, 'Alterac Pass': 3, 'Dragon Shire': 5, 'Garden of Terror': 3, 'Sky Temple': 5, 'Tomb of the Spider Queen': 1 }, synergy: ['etc', 'genji', 'garrosh', 'anubarak', 'greymane'], countered: ['uther', 'johanna', 'medivh', 'auriel'] },
            { id: 'maiev', name: 'Maiev', role: 'Melee Assassin', mapScore: { 'Battlefield of Eternity': 2, 'Infernal Shrines': 5, 'Towers of Doom': 3, 'Cursed Hollow': 5, 'Volskaya Foundry': 4, 'Braxis Holdout': 5, 'Alterac Pass': 3, 'Dragon Shire': 4, 'Garden of Terror': 4, 'Sky Temple': 3, 'Tomb of the Spider Queen': 5 }, synergy: ['blaze', 'blaze-b', 'etc', 'jaina', 'tassadar', 'deckard', 'malfurion'], countered: ['arthas', 'tyrael', 'johanna', 'lunara', 'tracer', 'lucio', 'brightwing'] },
            { id: 'murky', name: 'Murky', role: 'Melee Assassin', mapScore: { 'Battlefield of Eternity': 1, 'Infernal Shrines': 5, 'Towers of Doom': 4, 'Cursed Hollow': 3, 'Volskaya Foundry': 4, 'Braxis Holdout': 1, 'Alterac Pass': 3, 'Dragon Shire': 5, 'Garden of Terror': 5, 'Sky Temple': 3, 'Tomb of the Spider Queen': 1 }, synergy: ['johanna', 'zarya', 'brightwing'], countered: ['sonya', 'raynor', 'falstad'] },
            { id: 'qhira', name: 'Qhira', role: 'Melee Assassin', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 3, 'Towers of Doom': 2, 'Cursed Hollow': 3, 'Volskaya Foundry': 3, 'Braxis Holdout': 3, 'Alterac Pass': 3, 'Dragon Shire': 5, 'Garden of Terror': 3, 'Sky Temple': 3, 'Tomb of the Spider Queen': 5 }, synergy: ['uther', 'reghar', 'abathur', 'anubarak'], countered: ['lucio', 'uther', 'etc', 'diablo', 'garrosh', 'tracer'] },
            { id: 'samuro', name: 'Samuro', role: 'Melee Assassin', mapScore: { 'Battlefield of Eternity': 4, 'Infernal Shrines': 3, 'Towers of Doom': 4, 'Cursed Hollow': 2, 'Volskaya Foundry': 3, 'Braxis Holdout': 5, 'Alterac Pass': 4, 'Dragon Shire': 5, 'Garden of Terror': 3, 'Sky Temple': 4, 'Tomb of the Spider Queen': 1 }, synergy: ['deckard', 'malfurion', 'abathur', 'sylvanas'], countered: ['etc', 'lucio', 'yrel', 'cassia', 'orphea', 'medivh', 'diablo', 'stukov'] },
            { id: 'butcher', name: 'The Butcher', role: 'Melee Assassin', mapScore: { 'Battlefield of Eternity': 1, 'Infernal Shrines': 3, 'Towers of Doom': 5, 'Cursed Hollow': 3, 'Volskaya Foundry': 3, 'Braxis Holdout': 1, 'Alterac Pass': 3, 'Dragon Shire': 5, 'Garden of Terror': 4, 'Sky Temple': 5, 'Tomb of the Spider Queen': 5 }, synergy: ['abathur', 'uther', 'tyrande', 'tyrael'], countered: ['johanna', 'uther', 'etc', 'brightwing'] },
            { id: 'valeera', name: 'Valeera', role: 'Melee Assassin', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 3, 'Towers of Doom': 3, 'Cursed Hollow': 5, 'Volskaya Foundry': 3, 'Braxis Holdout': 3, 'Alterac Pass': 3, 'Dragon Shire': 5, 'Garden of Terror': 3, 'Sky Temple': 4, 'Tomb of the Spider Queen': 1 }, synergy: ['garrosh', 'etc', 'abathur', 'thrall', 'jaina'], countered: ['etc', 'arthas', 'medivh', 'lucio'] },
            { id: 'varian-s', name: 'Varian', role: 'Melee Assassin', mapScore: { 'Battlefield of Eternity': 1, 'Infernal Shrines': 2, 'Towers of Doom': 4, 'Cursed Hollow': 3, 'Volskaya Foundry': 4, 'Braxis Holdout': 4, 'Alterac Pass': 3, 'Dragon Shire': 4, 'Garden of Terror': 4, 'Sky Temple': 1, 'Tomb of the Spider Queen': 3 }, synergy: ['etc', 'anduin', 'lucio', 'malfurion', 'blaze', 'blaze-b', 'garrosh', 'anubarak'], countered: ['hanzo', 'etc', 'garrosh', 'lunara', 'uther', 'medivh'] },
            { id: 'zeratul', name: 'Zeratul', role: 'Melee Assassin', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 5, 'Towers of Doom': 5, 'Cursed Hollow': 4, 'Volskaya Foundry': 3, 'Braxis Holdout': 1, 'Alterac Pass': 3, 'Dragon Shire': 3, 'Garden of Terror': 3, 'Sky Temple': 4, 'Tomb of the Spider Queen': 1 }, synergy: ['abathur', 'garrosh', 'diablo', 'malfurion', 'kharazim', 'kharazim-dps', 'jaina', 'li-ming', 'hanzo', 'junkrat'], countered: ['brightwing', 'uther', 'medivh', 'diablo', 'varian-t', 'etc'] },

            // ================================== HEALER ==================================
            { id: 'alexstrasza', name: 'Alexstrasza', role: 'Healer', mapScore: { 'Battlefield of Eternity': 1, 'Infernal Shrines': 5, 'Towers of Doom': 3, 'Cursed Hollow': 3, 'Volskaya Foundry': 3, 'Braxis Holdout': 1, 'Alterac Pass': 3, 'Dragon Shire': 4, 'Garden of Terror': 4, 'Sky Temple': 3, 'Tomb of the Spider Queen': 3 }, synergy: ['johanna', 'diablo', 'kaelthas', 'azmodan', 'blaze', 'blaze-b'], countered: ['deckard', 'kaelthas', 'ana', 'anubarak', 'yrel', 'junkrat', 'sylvanas', 'falstad'] },
            { id: 'ana', name: 'Ana', role: 'Healer', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 3, 'Towers of Doom': 5, 'Cursed Hollow': 1, 'Volskaya Foundry': 3, 'Braxis Holdout': 3, 'Alterac Pass': 3, 'Dragon Shire': 3, 'Garden of Terror': 1, 'Sky Temple': 1, 'Tomb of the Spider Queen': 5 }, synergy: ['li-ming', 'etc', 'mephisto', 'malthael'], countered: ['anubarak', 'hanzo', 'zeratul', 'lucio', 'chen'] },
            { id: 'anduin', name: 'Anduin', role: 'Healer', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 5, 'Towers of Doom': 3, 'Cursed Hollow': 4, 'Volskaya Foundry': 3, 'Braxis Holdout': 1, 'Alterac Pass': 3, 'Dragon Shire': 4, 'Garden of Terror': 3, 'Sky Temple': 3, 'Tomb of the Spider Queen': 5 }, synergy: ['blaze', 'blaze-b', 'johanna', 'raynor', 'sylvanas', 'butcher', 'alarak', 'genji', 'stitches'], countered: ['varian-s', 'sonya', 'lunara', 'etc', 'kaelthas', 'stukov'] },
            { id: 'auriel', name: 'Auriel', role: 'Healer', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 4, 'Towers of Doom': 3, 'Cursed Hollow': 1, 'Volskaya Foundry': 3, 'Braxis Holdout': 5, 'Alterac Pass': 3, 'Dragon Shire': 4, 'Garden of Terror': 1, 'Sky Temple': 3, 'Tomb of the Spider Queen': 3 }, synergy: ['nazeebo', 'valla', 'diablo', 'leoric', 'tassadar'], countered: ['anubarak', 'chen', 'junkrat', 'chromie', 'deckard', 'sylvanas', 'malfurion'] },
            { id: 'brightwing', name: 'Brightwing', role: 'Healer', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 4, 'Towers of Doom': 5, 'Cursed Hollow': 5, 'Volskaya Foundry': 3, 'Braxis Holdout': 4, 'Alterac Pass': 4, 'Dragon Shire': 4, 'Garden of Terror': 3, 'Sky Temple': 5, 'Tomb of the Spider Queen': 1 }, synergy: ['diablo', 'cho', 'genji', 'stitches', 'tracer'], countered: ['anubarak', 'johanna', 'etc'] },
            { id: 'deckard', name: 'Deckard', role: 'Healer', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 5, 'Towers of Doom': 3, 'Cursed Hollow': 4, 'Volskaya Foundry': 5, 'Braxis Holdout': 3, 'Alterac Pass': 4, 'Dragon Shire': 3, 'Garden of Terror': 4, 'Sky Temple': 1, 'Tomb of the Spider Queen': 3 }, synergy: ['johanna', 'blaze', 'blaze-b', 'jaina', 'sghammer', 'kelthuzad', 'malganis'], countered: ['tracer', 'johanna', 'deathwing', 'whitemane', 'li-ming', 'malfurion'] },
            { id: 'kharazim', name: 'Kharazim', role: 'Healer', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 3, 'Towers of Doom': 4, 'Cursed Hollow': 3, 'Volskaya Foundry': 3, 'Braxis Holdout': 1, 'Alterac Pass': 3, 'Dragon Shire': 5, 'Garden of Terror': 3, 'Sky Temple': 5, 'Tomb of the Spider Queen': 1 }, synergy: ['etc', 'genji', 'garrosh', 'anubarak', 'greymane'], countered: ['uther', 'johanna', 'medivh', 'auriel'] },
            { id: 'lili', name: 'Li Li', role: 'Healer', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 3, 'Towers of Doom': 4, 'Cursed Hollow': 3, 'Volskaya Foundry': 5, 'Braxis Holdout': 3, 'Alterac Pass': 4, 'Dragon Shire': 5, 'Garden of Terror': 3, 'Sky Temple': 1, 'Tomb of the Spider Queen': 3 }, synergy: ['johanna', 'blaze', 'blaze-b', 'hanzo', 'kaelthas', 'uther', 'rehgar', 'stukov', 'cassia'], countered: ['etc', 'kelthuzad', 'sylvanas', 'jaina', 'stukov', 'yrel'] },
            { id: 'morales', name: 'Lt. Morales', role: 'Healer', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 3, 'Towers of Doom': 3, 'Cursed Hollow': 3, 'Volskaya Foundry': 3, 'Braxis Holdout': 5, 'Alterac Pass': 1, 'Dragon Shire': 3, 'Garden of Terror': 2, 'Sky Temple': 4, 'Tomb of the Spider Queen': 1 }, synergy: ['raynor', 'sghammer', 'johanna', 'etc'], countered: ['garrosh', 'chen', 'zeratul', 'chromie', 'lunara', 'auriel', 'anubarak', 'junkrat'] },
            { id: 'lucio', name: 'Lucio', role: 'Healer', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 3, 'Towers of Doom': 5, 'Cursed Hollow': 4, 'Volskaya Foundry': 4, 'Braxis Holdout': 3, 'Alterac Pass': 5, 'Dragon Shire': 4, 'Garden of Terror': 3, 'Sky Temple': 3, 'Tomb of the Spider Queen': 3 }, synergy: ['arthas', 'diablo', 'greymane', 'anubarak', 'valla'], countered: ['deckard', 'diablo', 'varian-t', 'malfurion', 'raynor', 'sghammer'] },
            { id: 'malfurion', name: 'Malfurion', role: 'Healer', mapScore: { 'Battlefield of Eternity': 2, 'Infernal Shrines': 4, 'Towers of Doom': 3, 'Cursed Hollow': 5, 'Volskaya Foundry': 3, 'Braxis Holdout': 2, 'Alterac Pass': 3, 'Dragon Shire': 5, 'Garden of Terror': 3, 'Sky Temple': 2, 'Tomb of the Spider Queen': 2 }, synergy: ['blaze', 'blaze-b', 'chromie', 'guldan', 'jaina', 'kaelthas', 'kelthuzad', 'li-ming', 'nazeebo', 'ragnaros'], countered: ['tracer', 'alarak', 'anubarak', 'artanis', 'jaina', 'kerrigan', 'li-ming'] },
            { id: 'reghar', name: 'Rehgar', role: 'Healer', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 3, 'Towers of Doom': 3, 'Cursed Hollow': 5, 'Volskaya Foundry': 2, 'Braxis Holdout': 1, 'Alterac Pass': 3, 'Dragon Shire': 4, 'Garden of Terror': 5, 'Sky Temple': 5, 'Tomb of the Spider Queen': 2 }, synergy: ['sonya', 'illidan', 'greymane'], countered: ['fenix', 'hanzo', 'kaelthas', 'muradin', 'ana', 'tracer'] },
            { id: 'stukov', name: 'Stukov', role: 'Healer', mapScore: { 'Battlefield of Eternity': 1, 'Infernal Shrines': 4, 'Towers of Doom': 3, 'Cursed Hollow': 5, 'Volskaya Foundry': 4, 'Braxis Holdout': 5, 'Alterac Pass': 3, 'Dragon Shire': 3, 'Garden of Terror': 3, 'Sky Temple': 3, 'Tomb of the Spider Queen': 3 }, synergy: ['raynor', 'etc', 'sghammer', 'sylvanas'], countered: ['anubarak', 'genji', 'uther'] },
            { id: 'tyrande', name: 'Tyrande', role: 'Healer', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 5, 'Towers of Doom': 4, 'Cursed Hollow': 3, 'Volskaya Foundry': 3, 'Braxis Holdout': 3, 'Alterac Pass': 3, 'Dragon Shire': 5, 'Garden of Terror': 3, 'Sky Temple': 3, 'Tomb of the Spider Queen': 5 }, synergy: ['diablo', 'etc', 'varian-t', 'anubarak', 'li-ming'], countered: ['anubarak', 'muradin', 'zeratul', 'maiev', 'fenix', 'lunara'] },
            { id: 'uther', name: 'Uther', role: 'Healer', mapScore: { 'Battlefield of Eternity': 3, 'Infernal Shrines': 5, 'Towers of Doom': 3, 'Cursed Hollow': 3, 'Volskaya Foundry': 3, 'Braxis Holdout': 1, 'Alterac Pass': 3, 'Dragon Shire': 3, 'Garden of Terror': 3, 'Sky Temple': 3, 'Tomb of the Spider Queen': 3 }, synergy: ['kerrigan', 'greymane', 'etc', 'illidan', 'butcher', 'zuljin', 'malfurion'], countered: ['guldan', 'lunara', 'malthael', 'nazeebo', 'sylvanas', 'zagara'] },
            { id: 'whitemane', name: 'Whitemane', role: 'Healer', mapScore: { 'Battlefield of Eternity': 2, 'Infernal Shrines': 5, 'Towers of Doom': 5, 'Cursed Hollow': 3, 'Volskaya Foundry': 3, 'Braxis Holdout': 1, 'Alterac Pass': 3, 'Dragon Shire': 2, 'Garden of Terror': 3, 'Sky Temple': 1, 'Tomb of the Spider Queen': 1 }, synergy: ['sonya', 'johanna', 'chromie', 'hanzo'], countered: ['johanna', 'li-ming', 'chromie', 'raynor', 'alarak'] },

            // ================================== SUPPORT ==================================
            { id: 'abathur', name: 'Abathur', role: 'Support', mapScore: { 'Battlefield of Eternity': 1, 'Infernal Shrines': 3, 'Towers of Doom': 4, 'Cursed Hollow': 5, 'Volskaya Foundry': 1, 'Braxis Holdout': 1, 'Alterac Pass': 5, 'Dragon Shire': 3, 'Garden of Terror': 5, 'Sky Temple': 5, 'Tomb of the Spider Queen': 1 }, synergy: ['illidan', 'tracer', 'greymane', 'zeratul', 'genji', 'malthael', 'yrel', 'sonya'], countered: ['dehaka', 'falstad', 'ragnaros', 'zarya', 'sylvanas', 'sghammer'] },
            { id: 'medivh', name: 'Medivh', role: 'Support', mapScore: { 'Battlefield of Eternity': 2, 'Infernal Shrines': 3, 'Towers of Doom': 3, 'Cursed Hollow': 5, 'Volskaya Foundry': 3, 'Braxis Holdout': 1, 'Alterac Pass': 3, 'Dragon Shire': 3, 'Garden of Terror': 4, 'Sky Temple': 5, 'Tomb of the Spider Queen': 3 }, synergy: ['stitches', 'illidan', 'greymane', 'genji', 'tracer', 'diablo'], countered: ['guldan', 'lunara', 'medivh', 'malfurion', 'junkrat'] },
            { id: 'tlv', name: 'The Lost Vikings', role: 'Support', mapScore: { 'Battlefield of Eternity': 1, 'Infernal Shrines': 3, 'Towers of Doom': 5, 'Cursed Hollow': 4, 'Volskaya Foundry': 4, 'Braxis Holdout': 1, 'Alterac Pass': 4, 'Dragon Shire': 3, 'Garden of Terror': 4, 'Sky Temple': 5, 'Tomb of the Spider Queen': 1 }, synergy: ['garrosh', 'zarya', 'sylvanas', 'raynor', 'sghammer'], countered: ['zagara', 'sonya', 'zeratul', 'nova', 'falstad', 'dehaka', 'li-ming', 'butcher'] },
            { id: 'zarya', name: 'Zarya', role: 'Support', mapScore: { 'Battlefield of Eternity': 5, 'Infernal Shrines': 4, 'Towers of Doom': 3, 'Cursed Hollow': 1, 'Volskaya Foundry': 3, 'Braxis Holdout': 5, 'Alterac Pass': 3, 'Dragon Shire': 3, 'Garden of Terror': 1, 'Sky Temple': 3, 'Tomb of the Spider Queen': 4 }, synergy: ['garrosh', 'sonya', 'valla', 'malfurion', 'yrel', 'leoric'], countered: ['garrosh', 'maiev', 'yrel', 'lunara', 'auriel', 'sylvanas', 'raynor', 'varian-s', 'chromie'] },
        ];

        const ROLES = ['Tank', 'Bruiser', 'Melee Assassin', 'Ranged Assassin', 'Healer', 'Support'];
        const EXCLUDEDROLES = ['Melee Assassin', 'Support'];
        const SAMEROLES = ['Melee Assassin', 'Ranged Assassin', 'Support'];

        // Pesi per il calcolo del punteggio
        const SCORE_WEIGHTS = {
            map: 1,
            synergy: 2.5,
            counter: 2.5,
            countered: 2.5,
            roleBonus: 5.0 // Grande bonus per riempire un ruolo mancante
        };

        // --- FUNZIONI DI INIZIALIZZAZIONE UI ---

        /** Inizializza le dropdown/checkbox con i dati degli eroi e delle mappe. */
        function initializeUI() {
            const mapSelect = document.getElementById('mapSelect');
            const alliedContainer = document.getElementById('alliedHeroesContainer');
            const enemyContainer = document.getElementById('enemyHeroesContainer');
            const bannedContainer = document.getElementById('bannedHeroesContainer');
            const roleToPick = document.getElementById('roleToPick');

            // 1. Inizializza Mappe
            mapSelect.innerHTML = '<option value="">Select Map...</option>';
            MAPS.forEach(map => {
                const option = document.createElement('option');
                option.value = map;
                option.textContent = map;
                mapSelect.appendChild(option);
            });

            // 2. Inizializza Mappe
            roleToPick.innerHTML = '<option value="">Select Role...</option>';
            ROLES.forEach(role => {
                const option = document.createElement('option');
                option.value = role;
                option.textContent = role;
                roleToPick.appendChild(option);
            });
            

            // 3. Inizializza Eroi (Alleati & Avversari)
            // Filtra per eroi con dati completi (ovvero: hanno il mapScore per la prima mappa)
            const availableHeroes = HEROES_DATA.filter(hero => hero.mapScore[MAPS[0]]);
            
            availableHeroes.sort((a, b) => a.name.localeCompare(b.name)).forEach(hero => {
                const checkboxHtml = `
                    <label class="flex items-center space-x-2 text-sm">
                        <input type="checkbox" name="__HERO_TYPE__" value="${hero.id}" 
                               class="hero-checkbox form-checkbox h-4 w-4 __COLOR_CLASS__ bg-gray-700 border-gray-600 rounded">
                        <span>${hero.name} <span class="text-gray-400">(${hero.role})</span></span>
                    </label>
                `;

                // Checkbox Bannati
                bannedContainer.innerHTML += checkboxHtml
                    .replace('__HERO_TYPE__', 'bannedHero')
                    .replace('__COLOR_CLASS__', 'text-green-500');
                

                // Checkbox Alleati
                alliedContainer.innerHTML += checkboxHtml
                    .replace('__HERO_TYPE__', 'alliedHero')
                    .replace('__COLOR_CLASS__', 'text-green-500');
                
                // Checkbox Avversari
                enemyContainer.innerHTML += checkboxHtml
                    .replace('__HERO_TYPE__', 'enemyHero')
                    .replace('__COLOR_CLASS__', 'text-purple-500');
            });

            // Aggiunge listener per limitare a 4 alleati e 5 nemici
            setupCheckboxLimits('alliedHero', 4);
            setupCheckboxLimits('enemyHero', 5);
        }
        
        /** Imposta il limite di selezione per i gruppi di checkbox. */
        function setupCheckboxLimits(name, limit) {
            const checkboxes = document.querySelectorAll(`input[name="${name}"]`);
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    const checked = document.querySelectorAll(`input[name="${name}"]:checked`);
                    
                    // Impedisce la selezione se il limite  superato
                    if (checked.length > limit) {
                        checkbox.checked = false;
                        displayMessage(`Errore: Puoi selezionare un massimo di ${limit} Eroi ${name.includes('allied') ? 'Alleati' : 'Avversari'}.`, true);
                        return; 
                    }
                    
                    // Logica di prevenzione doppia selezione (Alleato vs Nemico)
                    const otherName = name === 'alliedHero' ? 'enemyHero' : 'alliedHero';
                    const otherCheckbox = document.querySelector(`input[name="${otherName}"][value="${checkbox.value}"]`);
                    
                    if (checkbox.checked && otherCheckbox && otherCheckbox.checked) {
                         otherCheckbox.checked = false;
                         displayMessage(`Attenzione: ${HEROES_DATA.find(h => h.id === checkbox.value).name}  stato rimosso dalla lista ${otherName === 'alliedHero' ? 'Alleati' : 'Avversari'}. Un eroe pu essere selezionato solo una volta.`, false);
                    }
                });
            });
        }

        /** Mostra un messaggio di stato/errore nell'area risultati */
        function displayMessage(message, isError = true) {
            const list = document.getElementById('suggestionsList');
            const colorClass = isError ? 'bg-yellow-900 text-yellow-300' : 'bg-blue-900 text-blue-300';
            list.innerHTML = `<p class="text-center p-4 rounded-lg ${colorClass}">${message}</p>`;
        }


        // --- LOGICA DI DRAFTING ---

        /** Calcola i suggerimenti in base agli input dell'utente. */
        function calculateSuggestions() {
            const selectedMap = document.getElementById('mapSelect').value;
            const alliedIds = Array.from(document.querySelectorAll('input[name="alliedHero"]:checked')).map(el => el.value);
            const enemyIds = Array.from(document.querySelectorAll('input[name="enemyHero"]:checked')).map(el => el.value);
            const bannedIds = Array.from(document.querySelectorAll('input[name="bannedHero"]:checked')).map(el => el.value);
            const roleToPick = document.getElementById('roleToPick').value;
            
            // Verifica input minimi
            if (!selectedMap) {
                return displayMessage("Please, select a Map.");
            }

            // Identifica gli eroi gi selezionati (sia alleati che nemici)
            const pickedHeroIds = [...alliedIds, ...enemyIds, ...bannedIds];

            // Calcola i ruoli mancanti nella squadra alleata
            const alliedHeroes = HEROES_DATA.filter(h => alliedIds.includes(h.id));
            const enemyHeroes = HEROES_DATA.filter(h => enemyIds.includes(h.id));
            const alliedRoles = alliedHeroes.map(h => h.role);

            const neededRoles = ROLES.filter(role => !alliedRoles.includes(role) && !EXCLUDEDROLES.includes(role));
            // DPZ = DPS + Support, ruoli che competono per i 2 slot flessibili
            const flexibleRoles = alliedRoles.filter(role => SAMEROLES.includes(role));
            if (flexibleRoles.length < 2) {
                neededRoles.push('Melee Assassin', 'Ranged Assassin', 'Support');
            }


            const suggestions = [];

            // Itera su tutti gli eroi disponibili per trovare il migliore
            for (const candidateHero of HEROES_DATA) {
                // Salta gli eroi gi scelti
                if (roleToPick && candidateHero.role !== roleToPick){
                    continue;
                }

                if (pickedHeroIds.includes(candidateHero.id)) {
                    continue;
                }
                
                // Salta gli eroi che non hanno punteggi per la mappa selezionata (dovrebbe essere raro con l'inizializzazione)
                if (!candidateHero.mapScore[selectedMap]) {
                    continue;
                }


                let score = 0;
                let explanation = [];
                
                // 1. Punteggio Mappa (Peso 1.5)
                const mapScore = candidateHero.mapScore[selectedMap] || 0;
                score += mapScore * SCORE_WEIGHTS.map;
                explanation.push(`Mappa (${selectedMap}): ${mapScore * SCORE_WEIGHTS.map.toFixed(1)} punti (Valore base: ${mapScore}/5)`);

                // 2. Punteggio Sinergia (Alleati) (Peso 2.0)
                let synergyScore = 0;
                let synergyName="";
                alliedIds.forEach(alliedId => {
                    if (candidateHero.synergy && candidateHero.synergy.includes(alliedId)) {
                        synergyName += alliedId + " "
                        synergyScore += 1; // +1 per ogni alleato con cui ha sinergia
                    }
                });
                score += synergyScore * SCORE_WEIGHTS.synergy;
                if (synergyScore > 0) {
                    explanation.push(`Sinergia Alleata: ${synergyScore * SCORE_WEIGHTS.synergy.toFixed(1)} punti (Sinergia con ${synergyName})`);
                }

                // 3. Punteggio Counter (Avversari) (Peso 2.5)
                let counterScore = 0;
                let counterName="";
                enemyHeroes.forEach(enemyHeroes => {
                    // Controlla se l'eroe candidato  contrastato dall'eroe nemico
                    if (enemyHeroes.countered.includes(candidateHero.id)) {
                        counterName += enemyHeroes.id + " "
                        counterScore += 1; // +1 per ogni nemico che il candidato contrasta
                    }
                });
                score += counterScore * SCORE_WEIGHTS.counter;
                if (counterScore > 0) {
                    explanation.push(`Counter Avversario: ${counterScore * SCORE_WEIGHTS.counter.toFixed(1)} punti (Contrasta ${counterName})`);
                }

                // 4. Countered Score (Opponents)
                let counteredScore = 0;
                let counteredList = [];

                enemyIds.forEach(enemyId => {
                    if (candidateHero.countered && candidateHero.countered.includes(enemyId)) {
                        counteredScore -= 1;
                        const enemyHero = HEROES_DATA.find(h => h.id === enemyId);
                        counteredList.push(enemyHero ? enemyHero.name : enemyId);
                    }
                });

                score += counteredScore * SCORE_WEIGHTS.countered;

                if (counteredScore < 0) {
                    explanation.push(
                        `Countered by: ${(counteredScore * SCORE_WEIGHTS.countered).toFixed(1)} points (by: ${counteredList.join(', ')})`
                    );
                }

                
                // 5. Bonus Ruolo Mancante (Peso 5.0)
                let roleBonus = 0;
                if (neededRoles.includes(candidateHero.role)) {
                    roleBonus = SCORE_WEIGHTS.roleBonus;
                    score += roleBonus;
                    explanation.push(`**BONUS RUOLO**: ${roleBonus.toFixed(1)} punti (Manca il ruolo: ${candidateHero.role})`);
                }

                suggestions.push({
                    hero: candidateHero.name,
                    role: candidateHero.role,
                    score: score,
                    explanation: explanation
                });
            }

            // Ordina per punteggio decrescente
            suggestions.sort((a, b) => b.score - a.score);

            // Visualizza i risultati
            renderSuggestions(suggestions.slice(0, 10), alliedRoles, neededRoles);
        }

        /** Renderizza la lista di suggerimenti nella UI. */
        function renderSuggestions(topSuggestions, alliedRoles, neededRoles) {
            const list = document.getElementById('suggestionsList');
            
            // Visualizza la composizione attuale del team
            const alliedRolesString = alliedRoles.length > 0 ? alliedRoles.join(', ') : 'Nessun ruolo selezionato';
            const neededRolesString = neededRoles.length > 0 ? neededRoles.join(', ') : 'Tutti i ruoli sono coperti (teoricamente)';

            let html = `
                <div class="mb-6 p-4 rounded-lg bg-gray-800 border border-gray-700">
                    <p class="text-sm text-gray-400">Ruoli Alleati Selezionati: <span class="text-green-300 font-medium">${alliedRolesString}</span></p>
                    <p class="text-sm text-gray-400">Ruoli Mancanti Prioritari: <span class="text-red-300 font-bold">${neededRolesString}</span></p>
                </div>
            `;

            if (topSuggestions.length === 0) {
                html += '<p class="text-center text-yellow-300 bg-yellow-900 p-4 rounded-lg">Nessun eroe disponibile. Assicurati di non aver selezionato tutti gli eroi.</p>';
            } else {
                topSuggestions.forEach((suggestion, index) => {
                    const rankColor = index === 0 ? 'bg-yellow-500' : index === 1 ? 'bg-gray-400' : index === 2 ? 'bg-amber-700' : 'bg-gray-600';
                    const roleColor = {
                        'Tank': 'text-red-500',
                        'Bruiser': 'text-orange-500',
                        'Melee Assassin': 'text-yellow-500',
                        'Ranged Assassin': 'text-purple-500',
                        'Healer': 'text-green-500',
                        'Support': 'text-teal-500'
                    }[suggestion.role] || 'text-gray-400';

                    html += `
                        <div class="suggested-hero card p-4 rounded-xl transition-shadow cursor-pointer bg-gray-800 border border-gray-700 mb-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <span class="w-8 h-8 flex items-center justify-center rounded-full font-bold text-gray-900 ${rankColor}">${index + 1}</span>
                                    <div>
                                        <h3 class="text-xl font-bold ${roleColor}">${suggestion.hero}</h3>
                                        <p class="text-sm text-gray-400">${suggestion.role}</p>
                                    </div>
                                </div>

                                <div class="text-right">
                                    <span class="text-2xl font-extrabold text-red-400">${suggestion.score.toFixed(1)}</span>
                                    <span class="text-sm text-gray-500 block">Punteggio Totale</span>
                                </div>
                            </div>

                            <!-- Sezione espandibile -->
                            <div class="details hidden mt-3 p-4 bg-gray-900 rounded-lg border border-gray-700">
                                <h4 class="text-lg font-bold mb-2 text-white border-b border-gray-600 pb-1">Dettaglio Punteggio:</h4>
                                <ul class="text-sm text-gray-300 space-y-1 list-disc pl-5">
                                    ${suggestion.explanation.map(exp => `<li>${exp}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                    `;
                });
            }

            list.innerHTML = html;

            // Attiva il toggle al click su ciascuna card
            document.querySelectorAll('.suggested-hero').forEach(card => {
                card.addEventListener('click', () => {
                    const details = card.querySelector('.details');
                    details.classList.toggle('hidden');
                });
            });
        }



        // --- ESECUZIONE ---
        window.onload = initializeUI;
        // === Funzione di filtro per la ricerca eroi ===
        function filterHeroes(containerId, searchTerm) {
            const container = document.getElementById(containerId);
        const query = searchTerm.toLowerCase();
        const checkboxes = container.querySelectorAll('label');
    
        checkboxes.forEach(label => {
        const text = label.textContent.toLowerCase();
        label.style.display = text.includes(query) ? '' : 'none';
    });
}

    </script>
</body>
</html>
